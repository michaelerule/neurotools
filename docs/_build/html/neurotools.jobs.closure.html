<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>neurotools.jobs.closure module &mdash; Neurotools 2 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="neurotools.jobs.filenames module" href="neurotools.jobs.filenames.html" />
    <link rel="prev" title="neurotools.jobs.cache module" href="neurotools.jobs.cache.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Neurotools<img src="_static/logo1.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Subpackages:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="neurotools.signal.html">signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="neurotools.stats.html">stats</a></li>
<li class="toctree-l1"><a class="reference internal" href="neurotools.spatial.html">spatial</a></li>
<li class="toctree-l1"><a class="reference internal" href="neurotools.spikes.html">spikes</a></li>
<li class="toctree-l1"><a class="reference internal" href="neurotools.graphics.html">graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="neurotools.linalg.html">linalg</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="neurotools.jobs.html">jobs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="neurotools.jobs.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.cache.html">neurotools.jobs.cache module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">neurotools.jobs.closure module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.filenames.html">neurotools.jobs.filenames module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.initialize_system_cache.html">neurotools.jobs.initialize_system_cache module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.ndecorator.html">neurotools.jobs.ndecorator module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.parallel.html">neurotools.jobs.parallel module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="neurotools.jobs.html#module-neurotools.jobs">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="neurotools.jobs.html">util</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="neurotools.jobs.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.cache.html">neurotools.jobs.cache module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">neurotools.jobs.closure module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.filenames.html">neurotools.jobs.filenames module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.initialize_system_cache.html">neurotools.jobs.initialize_system_cache module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.ndecorator.html">neurotools.jobs.ndecorator module</a></li>
<li class="toctree-l3"><a class="reference internal" href="neurotools.jobs.parallel.html">neurotools.jobs.parallel module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="neurotools.jobs.html#module-neurotools.jobs">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Neurotools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="neurotools.jobs.html">neurotools.jobs package</a></li>
      <li class="breadcrumb-item active">neurotools.jobs.closure module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/neurotools.jobs.closure.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="module-neurotools.jobs.closure">
<span id="neurotools-jobs-closure-module"></span><h1>neurotools.jobs.closure module<a class="headerlink" href="#module-neurotools.jobs.closure" title="Permalink to this headline">¶</a></h1>
<p>Code dealing with closures in Python.</p>
<p>The default way that Python handles closures creates problems</p>
<blockquote>
<div><p>1   Late binding can cause suprising errors
2   Closing over mutable state can cause surprising errors
3   Mutable default arguments can causing surprising errors
4   Closing over external state that may change across runs can cause</p>
<blockquote>
<div>surprising errors, as the same arguments may return different values</div></blockquote>
<dl class="docutils">
<dt>5   Closing over extrenal state makes safe caching difficult, as we</dt>
<dd>have to guarantee that the arguments, function source, subroutines,
and closed-over state are all IDENTICAL before we can trust a
cached value.</dd>
</dl>
</div></blockquote>
<p>This module defines some decorators that improve safety, hopefully
automatically detecting functions that are likele to cause trouble.</p>
<dl class="function">
<dt id="neurotools.jobs.closure.is_immutable">
<code class="descclassname">neurotools.jobs.closure.</code><code class="descname">is_immutable</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neurotools/jobs/closure.html#is_immutable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neurotools.jobs.closure.is_immutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether an object is immutable. It must be composed of the
built-in types str, int, long, bool, float, and tuple. If it is
a tuple, each of its elements must be immutable</p>
</dd></dl>

<dl class="function">
<dt id="neurotools.jobs.closure.is_probably_safe">
<code class="descclassname">neurotools.jobs.closure.</code><code class="descname">is_probably_safe</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neurotools/jobs/closure.html#is_probably_safe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neurotools.jobs.closure.is_probably_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Objects are probably “safe” (unlikly to change) if they are
– immutable
– functions
– modules
Obviously, the latter two may change, but in practice it is likely
ok. Still, risky!</p>
</dd></dl>

<dl class="function">
<dt id="neurotools.jobs.closure.csv">
<code class="descclassname">neurotools.jobs.closure.</code><code class="descname">csv</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neurotools/jobs/closure.html#csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neurotools.jobs.closure.csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="neurotools.jobs.closure.inspect_function_closure">
<code class="descclassname">neurotools.jobs.closure.</code><code class="descname">inspect_function_closure</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neurotools/jobs/closure.html#inspect_function_closure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neurotools.jobs.closure.inspect_function_closure" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a function is “safe”</p>
<p>Formally this is quite tricky as not all closures can be avoided.
Functions MUST close over their namespace in some sense, in order
to access subroutines. This cannot be avoided, and changes in
subroutines may cause changes in behavior.</p>
</dd></dl>

<dl class="function">
<dt id="neurotools.jobs.closure.verify_function_closure">
<code class="descclassname">neurotools.jobs.closure.</code><code class="descname">verify_function_closure</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neurotools/jobs/closure.html#verify_function_closure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neurotools.jobs.closure.verify_function_closure" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a function is “safe” (likely immutable)</p>
<p>Formally this is quite tricky as not all closures can be avoided.
Functions MUST close over their namespace in order to access
subroutines later, as Python is by design late-binding. This cannot
be avoided, and changes in subroutines may cause changes in behavior.</p>
<p>Levels of safety:</p>
<dl class="docutils">
<dt>Safe:</dt>
<dd>Function references only other functions. All state is passed
via arguments. Hash values of subroutines are incorporated into
the hash value for this function.</dd>
<dt>Risky:</dt>
<dd>Function may close over state and reference globals, as long as
those states / globals are themselves immutable. This is risky
as values may still change across invokation. In theory we could
snapshot the dependent state and incorporate that into the call
signature.</dd>
<dt>Unsafe:</dt>
<dd>Function contains mutable defaults. Function references mutable
globals or closes over mutable state. Unsafe conditions will
cause a ValueError</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="neurotools.jobs.closure.get_subroutines">
<code class="descclassname">neurotools.jobs.closure.</code><code class="descname">get_subroutines</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neurotools/jobs/closure.html#get_subroutines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neurotools.jobs.closure.get_subroutines" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns things that resemble subroutines of function f. These are all
callable objets that are either named or bound via closures.
Return value is a set of functions.
Non-function callable subroutines will cause an error.</p>
</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="neurotools.jobs.cache.html" class="btn btn-neutral float-left" title="neurotools.jobs.cache module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="neurotools.jobs.filenames.html" class="btn btn-neutral float-right" title="neurotools.jobs.filenames module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, M Rule.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>